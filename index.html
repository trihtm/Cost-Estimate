<!DOCTYPE html>
<html lang="en" ng-app="costEstimateApp">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Project Cost Estimate</title>

        <link href="assets/bootstrap-3.3.6-dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="index.css" rel="stylesheet" />

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>

    <body ng-controller="costEstimateController as costEstimate">
        <div class="container">
            <div class="page-header">
                <h1>Cost Estimate</h1>
            </div>

            <div class="row">
                <div class="col-lg-4">
                    <h3>Product Summary</h3>

                    <hr />

                    <dl class="dl-horizontal">
                        <dt>Subtotal</dt>
                        <dd>${{ costEstimate.getSubPrice() }}</dd>

                        <dt>VAT({{ TAX }}%)</dt>
                        <dd>${{ costEstimate.getVAT() }}</dd>

                        <dt>Total</dt>
                        <dd>${{ costEstimate.getTotalPrice() }}</dd>
                    </dl>

                    <hr />

                    <div class="control text-right">
                        <button type="button" class="btn btn-reserve" ng-class="{'btn-primary': costEstimate.getStep() == 5}">Buy now</button>
                    </div>
                </div>

                <div class="col-lg-8">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar"
                             aria-valuenow="{{ costEstimate.getProgress() }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ costEstimate.getProgress() }}%;">
                            <span class="sr-only">{{ costEstimate.getProgress() }}% Complete</span>
                        </div>
                    </div>

                    <h3>Step 1. Choose a product group</h3>

                    <hr />

                    <div class="row">
                        <div class="col-lg-3 text-center" ng-repeat="(key, productGroup) in costEstimate.config">
                            <button type="button" class="btn btn-default" ng-click="costEstimate.setProductGroup(key)" ng-class="{'btn-primary': costEstimate.getProductGroup() == key}">
                                {{ productGroup.name }}
                            </button>
                        </div>
                    </div>

                    <div ng-if="costEstimate.getStep() >= 2">
                        <h3>Step 2. Choose a product type</h3>

                        <hr />

                        <div ng-repeat="(productGroupSlug, productGroup) in costEstimate.config">
                            <div class="row" ng-if="costEstimate.getProductGroup() == productGroupSlug">
                                <div class="col-lg-4 text-center"
                                     ng-repeat="(productTypeSlug, productType) in costEstimate.config[productGroupSlug]['types']">
                                    <button type="button" class="btn btn-default"
                                            ng-click="costEstimate.setProductType(productTypeSlug)"
                                            ng-class="{'btn-primary': costEstimate.isProductTypeChoosen(productTypeSlug)}">
                                        {{ productType.name }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="costEstimate.getStep() >= 3">
                        <h3>Step 3. Choose a product scale</h3>

                        <hr />

                        <div ng-repeat="(productGroupSlug, productGroup) in costEstimate.config">
                            <div class="row" ng-if="costEstimate.getProductGroup() == productGroupSlug">
                                <div class="col-lg-3 text-center"
                                     ng-repeat="(productScaleSlug, productScale) in costEstimate.config[productGroupSlug]['scales']">
                                    <button type="button" class="btn btn-default"
                                            ng-click="costEstimate.setProductScale(productScaleSlug)"
                                            ng-class="{'btn-primary': costEstimate.getProductScale() == productScaleSlug}">
                                        {{ productScale.name }} ({{ productScale.pages }} pages)
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="costEstimate.getStep() >= 4">
                        <h3>Step 4. Choose additional features</h3>

                        <hr />

                        <div ng-repeat="(productGroupSlug, productGroup) in costEstimate.config">
                            <div ng-if="costEstimate.getProductGroup() == productGroupSlug">
                                <table class="table table-bordered">
                                    <tr>
                                        <th width="60%">Feature name</th>

                                        <th width="40%">Action</th>
                                    </tr>

                                    <tr ng-repeat="(featureSlug, feature) in costEstimate.config[productGroupSlug]['additional-features']">
                                        <td>
                                            {{ feature.name }}
                                        </td>

                                        <td class="text-center">
                                            <div ng-if="feature.extraForm && featureSlug == 'sns-login'">
                                                <div class="checkbox" ng-repeat="(snsSlug, sns) in feature.lists">
                                                    <label>
                                                        <input type="checkbox" name="sns[]" value="{{ snsSlug }}"
                                                            ng-model="costEstimate.__extraFeatures[productGroupSlug][featureSlug][snsSlug]" ng-change="costEstimate.otherServiceFeatureChange()"
                                                        />

                                                        {{ sns.name }}
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-inline" ng-if="feature.extraForm && featureSlug == 'other-service-integration'">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <input type="number" class="form-control" value="0" min="0" max="99" required="required"
                                                            ng-init="costEstimate.__extraFeatures[productGroupSlug][featureSlug] = 0"
                                                            ng-model="costEstimate.__extraFeatures[productGroupSlug][featureSlug]" ng-change="costEstimate.otherServiceFeatureChange()" />

                                                        <div class="input-group-addon">services</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div ng-if="!feature.extraForm">
                                                <button type="button" class="btn btn-default"
                                                        ng-click="costEstimate.setFeature(featureSlug)"
                                                        ng-class="{'btn-primary': costEstimate.isFeatureChoosen(featureSlug)}">
                                                    Apply
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div ng-if="costEstimate.getStep() >= 4">
                        <h3>Last step. Choose quality multiplier</h3>

                        <hr />

                        <div ng-repeat="(productGroupSlug, productGroup) in costEstimate.config">
                            <div class="row" ng-if="costEstimate.getProductGroup() == productGroupSlug">
                                <div class="col-lg-4 text-center"
                                     ng-repeat="(qualitySlug, quality) in costEstimate.config[productGroupSlug]['quality']">
                                    <button type="button" class="btn btn-default"
                                            ng-click="costEstimate.setQuality(qualitySlug)"
                                            ng-class="{'btn-primary': costEstimate.getQuality() == qualitySlug}">
                                        {{ quality.name }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <br />
                </div>
            </div>
        </div>

        <script src="assets/angular-1.4.8/angular.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="config.js"></script>
        <script type="text/javascript" src="index.js"></script>
    </body>
</html>